import{l as j,u as C,G as k,k as M,i as B,c as O,w as h,o as c,d as o,t as i,b as e,j as v,v as b,a as l,g as p,m as x,e as S,F as $,P as T,s as q,p as U}from"./app-7a2c5f6c.js";import{_ as A}from"./AuthenticatedLayout-c791908e.js";import{_ as f}from"./InputError-fbd0d10f.js";import{u as I,c as P,r as D}from"./index.esm-896f94d3.js";import{s as w,f as y,v as G}from"./UserValidationRules-9abbace9.js";const L=(g,d)=>{Object.keys(g).forEach(a=>{d[a]!=null&&(g[a]=d[a])})},R={class:"intro-y flex items-center mt-8"},z={class:"text-lg font-medium mr-auto"},H={class:"grid grid-cols-12 gap-6 mt-5"},J={class:"intro-y col-span-12 lg:col-span-6"},K={class:"intro-y box p-5"},Q={for:"crud-form-1",class:"form-label"},W={for:"crud-form-1",class:"form-label"},X={for:"crud-form-1",class:"form-label"},Y={for:"crud-form-1",class:"form-label"},Z={class:""},ee={for:"crud-form-1",class:"form-label"},se={class:"grid grid-cols-3 gap-2"},oe=["value"],re=["src"],te={class:"mt-3"},le={for:"crud-form-2",class:"form-label"},ae=["value"],ne={class:"mt-3"},ie={for:"crud-form-2",class:"form-label"},de=["value"],ue={class:"text-right mt-5"},ve={__name:"Edit",props:{roles:Array,countries:Array,nationalities:Array,user:Object},setup(g){const d=g,{t:a}=j(),F=Object.keys(d.countries)[0],s=C({first_name:"",middle_name:"",last_name:"",email:"",roles:[],country:F,phone:"",nationality:"",gender:"male"});k(s.country,n=>{w.value=d.countries[n]}),k(y,n=>{s.phone=`${w.value.phone_code}${n}`});const E=M(()=>({...G(),roles:{required:P.withMessage(a("validation.required",{attribute:"roles"}),D)}})),u=I(E,s),N=async()=>{await u.value.$validate()&&s.put(route("dashboard.user.update",{user:d.user.uuid}),{onSuccess:()=>{q.Inertia.visit(route("dashboard.user.index"))}})};return B(()=>{const n=d.user;L(s,n),s.roles=Object.keys(n.formatted_roles),s.country=n.country_id+"",w.value=d.countries[n.country_id],y.value=n.phone.replace(n.country_code,""),s.nationality=n.nationality_id+""}),(n,t)=>{const m=U("FrontErrorMessage"),V=U("TomSelect");return c(),O(A,null,{default:h(()=>[o("div",R,[o("h2",z,i(e(a)("admin.update")+" "+e(a)("admin.users.admin")),1)]),o("div",H,[o("div",J,[o("div",K,[o("div",null,[o("label",Q,i(e(a)("validation.attributes.first_name")),1),v(o("input",{id:"crud-form-1",type:"text",class:"form-control w-full","onUpdate:modelValue":t[0]||(t[0]=r=>e(s).first_name=r),placeholder:"Name"},null,512),[[b,e(s).first_name]]),l(f,{class:"mt-2",message:e(s).errors.first_name},null,8,["message"]),l(m,{errors:e(u).first_name.$errors},null,8,["errors"])]),o("div",null,[o("label",W,i(e(a)("validation.attributes.middle_name")),1),v(o("input",{id:"crud-form-1",type:"text",class:"form-control w-full","onUpdate:modelValue":t[1]||(t[1]=r=>e(s).middle_name=r),placeholder:"Name"},null,512),[[b,e(s).middle_name]]),l(f,{class:"mt-2",message:e(s).errors.middle_name},null,8,["message"]),l(m,{errors:e(u).middle_name.$errors},null,8,["errors"])]),o("div",null,[o("label",X,i(e(a)("validation.attributes.last_name")),1),v(o("input",{id:"crud-form-1",type:"text",class:"form-control w-full","onUpdate:modelValue":t[2]||(t[2]=r=>e(s).last_name=r),placeholder:"Name"},null,512),[[b,e(s).last_name]]),l(f,{class:"mt-2",message:e(s).errors.last_name},null,8,["message"]),l(m,{errors:e(u).last_name.$errors},null,8,["errors"])]),o("div",null,[o("label",Y,i(e(a)("validation.attributes.email")),1),v(o("input",{id:"crud-form-1",type:"email",class:"form-control w-full","onUpdate:modelValue":t[3]||(t[3]=r=>e(s).email=r),placeholder:"Email"},null,512),[[b,e(s).email]]),l(f,{class:"mt-2",message:e(s).errors.email},null,8,["message"]),l(m,{errors:e(u).email.$errors},null,8,["errors"])]),o("div",Z,[o("label",ee,i(e(a)("validation.attributes.phone")),1),o("div",se,[l(V,{id:"crud-form-2",modelValue:e(s).country,"onUpdate:modelValue":t[4]||(t[4]=r=>e(s).country=r),class:"col-span-1",options:{create:!1}},{default:h(()=>[(c(!0),p($,null,x(d.countries,(r,_)=>(c(),p("option",{key:_,value:r.id},[o("img",{src:r.icon_url,alt:""},null,8,re),S(" "+i(r.phone_code),1)],8,oe))),128))]),_:1},8,["modelValue"]),v(o("input",{id:"crud-form-1",type:"text",class:"form-control col-span-2","onUpdate:modelValue":t[5]||(t[5]=r=>T(y)?y.value=r:null),placeholder:"Phone"},null,512),[[b,e(y)]])]),l(f,{class:"mt-2",message:e(s).errors.phone},null,8,["message"]),l(m,{errors:e(u).phone.$errors},null,8,["errors"])]),o("div",te,[o("label",le,i(e(a)("validation.attributes.roles")),1),l(V,{id:"crud-form-2",modelValue:e(s).roles,"onUpdate:modelValue":t[6]||(t[6]=r=>e(s).roles=r),class:"w-full",options:{create:!1},multiple:""},{default:h(()=>[(c(!0),p($,null,x(d.roles,(r,_)=>(c(),p("option",{key:_,value:r.id},i(r.name),9,ae))),128))]),_:1},8,["modelValue"]),l(f,{class:"mt-2",message:e(s).errors.roles},null,8,["message"]),l(m,{errors:e(u).roles.$errors},null,8,["errors"])]),o("div",ne,[o("label",ie,i(e(a)("validation.attributes.nationality")),1),l(V,{id:"crud-form-2",modelValue:e(s).nationality,"onUpdate:modelValue":t[7]||(t[7]=r=>e(s).nationality=r),class:"w-full",options:{create:!1}},{default:h(()=>[(c(!0),p($,null,x(d.nationalities,(r,_)=>(c(),p("option",{key:_,value:r.id},i(r.name),9,de))),128))]),_:1},8,["modelValue"]),l(f,{class:"mt-2",message:e(s).errors.nationality},null,8,["message"]),l(m,{errors:e(u).nationality.$errors},null,8,["errors"])]),o("div",ue,[o("button",{type:"button",class:"btn btn-primary w-24",onClick:t[8]||(t[8]=r=>N())},i(e(a)("admin.update")),1)])])])])]),_:1})}}};export{ve as default};
